<html>

  <head>
    <title>Hyperbolic egg</title>
    <script type="text/javascript" src="../jsxgraphcore.js"></script>
    <script type="text/javascript" src="../jquery-1.8.3.min.js"></script>  </head>

  <body>
    <div id="box" style="width:400px; height:400px;"></div>
    <script type="text/javascript">

    var board = JXG.JSXGraph.initBoard('box', {
      boundingbox: [-1.1, -1.1, 1.5, 1.5],
      showCopyright: false,
      showNavigation: false
    });

    var aSlider = board.create('slider',[[-1,1.1],[0.5,1.1],[0.1,1,2]],{name:'a'});
    var bSlider = board.create('slider',[[-1,1.2],[0.5,1.2],[0.1,0.5,2]],{name:'b'});
    var dSlider = board.create('slider',[[-1,1.3],[0.5,1.3],[0.1,0.8,2]],{name:'d'});
    
    var circle = board.create('circle', [[0, 0], [1, 0]]);

    var hyper = true;

    function fx(t) {
      return aSlider.Value() * Math.cos(t) + dSlider.Value();
    }

    function fy(t) {
      return bSlider.Value() * Math.sin(t) + 0.0;
    }

    function tanh(x) {
      var exp = Math.exp(2 * x);
      return (exp - 1) / (exp + 1);
    }

    function atanh(x) {
      return 0.5 * Math.log((1 + x)/(1 - x));
    }

    function polarToCatesian(r, theta) {
      return [r * Math.cos(theta), r * Math.sin(theta)];
    }
  
    function cartesianToPolar(x, y) {
      return [Math.sqrt(x*x + y*y), Math.atan2(y, x)];
    }
  
    function project(t) {
      var pol = cartesianToPolar(fx(t), fy(t));
      var newR = 0.6 * tanh(pol[0]);
      return polarToCatesian(newR, pol[1]);
    }
  
    function projectx(t) {
      return hyper ? project(t)[0] : fx(t);
    }
  
    function projecty(t) {
      return hyper ? project(t)[1] : fy(t);
    }

    board.createElement('curve', [
              function(t){return projectx(t);}, 
              function(t){return projecty(t);},
        0, 2*Math.PI
              ], 
              {strokeColor:'red', strokeWidth:2}
            );
    board.update();
    
    </script>
  </body>

</html>